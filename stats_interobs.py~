"""
Generating some statistics for my thesis from the save files 
These statistics are for testing the inter observer variability for defining the airway outline and the landmark points on the training set
"""

print __doc__

import pickle
import numpy as np


print "opening evaluation using optimal parameters"
mg=open('pcaproj_max003_6_4_trainingset.dat', 'rb')
op1=pickle.load(mg)
mg.close()

orig=np.array(op1[1])
fit=np.array(op1[0])
fitmax=np.array(op1[2])

print "Training set"
diff=(fit-orig)/orig * 100
combo1=np.zeros((len(diff), 4))
combo1[:,0], combo1[:,1], combo1[:,2], combo1[:,3]=range(1,len(diff)+1),orig, fit, np.around(diff) 
print np.around(combo1, decimals=2)

print "Mean fit orig"
print np.around(orig.mean(), decimals=1)
print np.around(orig.std(), decimals=1)
print "Mean fit"
print np.around(fit.mean(), decimals=1)
print np.around(fit.std(), decimals=1)
print "Percentage difference"
print np.around(diff.mean(), decimals=1)
print np.around(diff.std(), decimals=1)


print "opening evaluation using optimal parameters with new alignment points"
mg=open('pcaproj_max003_6_4_trainingset2.dat', 'rb')
op1=pickle.load(mg)
mg.close()

orig1=np.array(op1[1])
fit1=np.array(op1[0])

print "Training set"
diff=(fit1-orig1)/orig1 * 100
combo1=np.zeros((len(diff), 4))
combo1[:,0], combo1[:,1], combo1[:,2], combo1[:,3]=range(1,len(diff)+1),orig1, fit1, np.around(diff) 
print np.around(combo1, decimals=2)

print "Mean fit1 orig1"
print np.around(orig1.mean(), decimals=1)
print np.around(orig1.std(), decimals=1)
print "Mean fit1"
print np.around(fit1.mean(), decimals=1)
print np.around(fit1.std(), decimals=1)
print "Percentage difference"
print np.around(diff.mean(), decimals=1)
print np.around(diff.std(), decimals=1)

print "absolute difference between sets"
print np.around(np.mean(np.abs(fit-fit1)), decimals=2)
